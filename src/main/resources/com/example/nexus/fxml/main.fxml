<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane fx:id="rootPane" xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.nexus.controller.MainController"
            styleClass="browser-root">

    <top>
        <VBox styleClass="top-container">
            <!-- Tab bar with new tab button positioned right next to last tab -->
            <HBox styleClass="tab-bar-container" alignment="CENTER_LEFT" spacing="0">
                <TabPane fx:id="tabPane" tabClosingPolicy="UNAVAILABLE"
                         styleClass="browser-tab-pane"
                         tabMinWidth="100" tabMaxWidth="200">
                </TabPane>
                <Button fx:id="newTabButton" onAction="#handleNewTab" styleClass="new-tab-button">
                    <tooltip><Tooltip text="New Tab (Ctrl+T)"/></tooltip>
                </Button>
                <Region HBox.hgrow="ALWAYS"/>
            </HBox>

            <!-- Navigation toolbar -->
            <HBox alignment="CENTER_LEFT" spacing="5.0" styleClass="toolbar">
                <Button fx:id="backButton" onAction="#handleBack" styleClass="nav-button">
                    <tooltip><Tooltip text="Back (Alt+Left)"/></tooltip>
                </Button>
                <Button fx:id="forwardButton" onAction="#handleForward" styleClass="nav-button">
                    <tooltip><Tooltip text="Forward (Alt+Right)"/></tooltip>
                </Button>
                <Button fx:id="reloadButton" onAction="#handleReload" styleClass="nav-button">
                    <tooltip><Tooltip text="Reload (F5)"/></tooltip>
                </Button>
                <Button fx:id="homeButton" onAction="#handleHome" styleClass="nav-button">
                    <tooltip><Tooltip text="Home"/></tooltip>
                </Button>

                <!-- Address bar with security indicator -->
                <HBox styleClass="address-bar-container" HBox.hgrow="ALWAYS" alignment="CENTER_LEFT">
                    <Label fx:id="securityIcon" styleClass="security-icon"/>
                    <TextField fx:id="addressBar" promptText="Search or enter address"
                               HBox.hgrow="ALWAYS" styleClass="address-bar"/>
                    <Button fx:id="bookmarkButton" onAction="#handleBookmarkCurrentPage" styleClass="address-bar-button">
                        <tooltip><Tooltip text="Bookmark this page"/></tooltip>
                    </Button>
                </HBox>

                <Button fx:id="downloadsButton" onAction="#handleShowDownloads" styleClass="nav-button">
                    <tooltip><Tooltip text="Downloads"/></tooltip>
                </Button>
                <Button fx:id="menuButton" onAction="#handleMenu" styleClass="nav-button">
                    <tooltip><Tooltip text="Menu"/></tooltip>
                </Button>
                <padding>
                    <Insets bottom="5.0" left="10.0" right="10.0" top="5.0"/>
                </padding>
            </HBox>
        </VBox>
    </top>

    <!-- Browser content area - this will hold the current tab's browser view -->
    <center>
        <StackPane fx:id="browserContainer" styleClass="browser-container"/>
    </center>

    <!-- Status bar at bottom -->
    <bottom>
        <HBox fx:id="statusBar" styleClass="status-bar" alignment="CENTER_LEFT" visible="false" managed="false">
            <Label fx:id="statusLabel" styleClass="status-label"/>
            <padding>
                <Insets bottom="3.0" left="10.0" right="10.0" top="3.0"/>
            </padding>
        </HBox>
    </bottom>

</BorderPane>
